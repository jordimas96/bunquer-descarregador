
<div class="content">

    <h1>Selecciona els capítols</h1>

    <h4 class="mt-4">Temporades:</h4>
    <div class="mt-2 botons-temporades">
        @for (boto of botonsTemporades; track boto.id) {
            <label [class.selected]="seleccio[boto.id]" [class.disabled]="cs.descarregant">
                <input type="checkbox" (change)="seleccioChange()" [disabled]="cs.descarregant" [(ngModel)]="seleccio[boto.id]">
                {{ boto.text }}
            </label>
        }
    </div>

    <p-slider class="my-4" [(ngModel)]="rangCapitols" [range]="true" [min]="0" [max]="maxRang" step="1" [disabled]="cs.descarregant"></p-slider>

    @if (llistaSeleccionada.length) {
        <div class="mt-5 mb-3">Capítols seleccionats:</div>
        <div class="info-capitols-seleccionats">
            <div class="des-de ms-3 mb-2">Des de:</div>
            <div class="titol-capitol">{{ llistaSeleccionada[rangCapitols[0]].title }}</div>
            <div class="fins-a ms-3 mb-2 mt-4">Fins a:</div>
            <div class="titol-capitol">{{ llistaSeleccionada[rangCapitols[1]].title }}</div>
        </div>

        @if (!cs.descarregant) {
            <button class="boto descarregar mt-5" (click)="descarregar()">Descarrega {{ rangCapitols[1] - rangCapitols[0] + 1}} capítols</button>
        } @else {
            <div class="progres-descarrega">
                <h4 class="mb-4">Descarregant ({{ cs.progresDescarrega!.descarregats }} / {{ cs.progresDescarrega!.total }})</h4>

                <div class="barra-progres mt-2">
                    <div class="total">
                        <div class="progres" [style.width.%]="cs.progresDescarrega!.descarregats / cs.progresDescarrega!.total * 100"></div>
                    </div>
                </div>
            </div>
        }
    }


</div>
